spec_version: 2
description: sleep

inputs:
  agent_name:
    type: agent
    default: eks1
  sleep_secs:
    type: string
    default: '60'

outputs:
  out1:
    value: '{{ .grains.sleep.activities.deploy.commands.sleep_cmd.outputs.output1 }}'  

grains:
  sleep:
    kind: shell
    spec:
      agent:
        name: '{{.inputs.agent_name}}'
      activities:
        deploy:
          commands:
            - name: sleep_cmd
              command: "sleep {{ .inputs.sleep_secs }} && export output1=$(date +%s)"
              outputs:
                - output1
